Name: Network Security Services (NSS)
Short Name: nss
URL: http://www.mozilla.org/projects/security/pki/nss/
Version: 3.14 pre-release snapshot 2012-06-28 01:00:00 PDT
License: MPL 2 and MPL/LGPL/GPL tri-license
License File: http://www.mozilla.org/MPL/
Security Critical: yes

Description:
NSS 3.14 pre-release snapshot 2012-06-28 01:00:00 PDT with NSPR 4.9

This copy of NSS has been customized for Chromium.  NSPR is also put here
rather than in a separate directory to emphasize the fact that Chromium is
using NSPR strictly as an NSS dependency.

We took a subset of NSS, omitting the SSL and SMIME libraries and the
built-in root CA certificates module.  This NSS subset satisfies the
dependencies of the NSS SSL library in src/net/third_party/nss.  Do NOT use
this copy of NSS on platforms that have NSS as system libraries, such as
Linux.

The source code was checked out from the mozilla.org CVS repository using
the nspr-checkout.sh and nss-checkout.sh scripts in the scripts directory.
The current source code was checked out with the CVS tags
-D "2012-06-28 01:00:00 PDT" and -r NSPR_4_9_RTM.

Local Modifications:

We made the following local changes to NSPR.
- patches/nspr-static.patch: to build NSPR as static libraries.  See NSPR
  bug 533014 (https://bugzilla.mozilla.org/show_bug.cgi?id=533014).
- patches/prcpucfg.h: added to the mozilla/nsprpub/pr/include directory.
- patches/nspr-attach-as-system-thread.patch: attach a "foreign" thread
  (a thread not created by NSPR) to NSPR as a "system" thread rather than
  a "user" thread, which needs to terminate before PR_Cleanup can return.
  (The "system" vs. "user" thread distinction comes from Java, and
  ultimately from Solaris threads.)  This is a workaround for
  http://crbug.com/40663.
- patches/nspr-remove-io.patch: Remove IO operations in NSPR to allow NSS
  to work in the sandbox.  Do not initialize IO when initializing NSPR.
  Windows version of NSPR also tried to use getaddrinfo to resolve hostname
  in a SSL connection.  By removing _PR_HAVE_GETADDRINFO this will force it
  to use PR_GetHostByName.  Removing _PR_INET6_PROBE will prevent it from
  creating an IPv6 socket to probe if IPv6 is there.
  DO NOT upstream this patch.
- patches/nspr-warnings.patch: fix compiler warnings.  See NSPR bug 699567
  (https://bugzilla.mozilla.org/show_bug.cgi?id=699567).
- patches/nspr-merge-795213.patch: Fix a compiler warning
  (upstream bug at https://bugzilla.mozilla.org/show_bug.cgi?id=795213)

We made the following local changes to NSS.
- patches/nss-static.patch: to build NSS as static libraries and omit
  libpkix (the new certification path validation library) and
  softoken/legacydb (support for the old Berkeley DB databases).  See NSS
  bug 534471 (https://bugzilla.mozilla.org/show_bug.cgi?id=534471).
- mozilla/security/nss/exports_win.def: The list of exports to use when
  building nss as a dynamic library (crnss.dll).
- patches/nss-remove-fortezza.patch: remove Fortezza certificate support
  from PK11_ImportPublicKey.  See NSS bug 668397
  (https://bugzilla.mozilla.org/show_bug.cgi?id=668397).
- patches/nss-warnings.patch: fix compiler warnings.  See NSS bug 753189
  (https://bugzilla.mozilla.org/show_bug.cgi?id=753189).
- patches/nss-der-encode-time-choice.patch: Fix handling of dates before 1950
  and exactly 2050-01-01 00:00:00.  See NSS bug 786531
  (https://bugzilla.mozilla.org/show_bug.cgi?id=786531)
- patches/nss-ocsp-const.patch: fix compiler warnings.  See NSS bug 186619
  (https://bugzilla.mozilla.org/show_bug.cgi?id=186619).
- patches/nss-shvfy-const.patch: fix compiler warnings.  See NSS bug 475578
  (https://bugzilla.mozilla.org/show_bug.cgi?id=475578).
- patches/nss-pqg-sechash.patch: fix duplicate HASH_ResultLen and
  HASH_HashBuf functions.  See NSS bug 475578
  (https://bugzilla.mozilla.org/show_bug.cgi?id=475578).
- patches/nss-error-collision.patch: fix error code collision of
  SEC_ERROR_LEGACY_DATABASE.  See NSS bug 753116
  (https://bugzilla.mozilla.org/show_bug.cgi?id=753116).
- patches/nss-utilpars.patch: fix two bugs in utilpars.c.  See NSS bug 785208
  (https://bugzilla.mozilla.org/show_bug.cgi?id=785208) and NSS bug 753116
  (https://bugzilla.mozilla.org/show_bug.cgi?id=753116).
- patches/nss-debug-init-failure.patch: a temporary patch to help track down
  the NSS_NoDB_Init failure.  See http://crbug.com/153281.
- patches/nss-merge-812399.patch: Fix a regression that caused NSS_NoDB_Init
  to fail if /secmod.db exists on the computer. See NSS bug 812399
  (https://bugzilla.mozilla.org/show_bug.cgi?id=812399).
- patches/nss-freebl-cpuid.patch: fix a compilation error under GCC 4.6.3
  with the -O3 -fvisibility=hidden -fno-omit-frame-pointer flags. See NSS
  bug 814031 (https://bugzilla.mozilla.org/show_bug.cgi?id=814031).
